<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover, interactive-widget=resizes-content" />
  <meta name="theme-color" content="#000000" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <title>To‑Do List (Preto e Branco)</title>
  
  <link rel="manifest" href="manifest.json" />
  <link rel="icon" type="image/png" sizes="192x192" href="icons/icon-192.png" />
  <link rel="icon" type="image/png" sizes="512x512" href="icons/icon-512.png" />
  <link rel="apple-touch-icon" href="icons/icon-192.png" />
  <link rel="stylesheet" href="style.css?v=1.0.1" />
</head>
<body>
  <div id="app" class="frame" role="application">
    <header class="appbar">
      <div class="appbar-left">
        <button id="globalBackBtn" class="back-btn" type="button" aria-label="Voltar" hidden>←</button>
        <div class="app-title" id="appTitle">To‑Do</div>
      </div>
      <div class="appbar-right">
        <button id="appMenuBtn" class="icon-btn" type="button" aria-label="Mais opções" aria-haspopup="true" aria-expanded="false" hidden>⋮</button>
        <div id="appMenu" class="app-menu" role="menu" hidden>
          <button id="shareListAction" class="app-menu-item" type="button" role="menuitem">Compartilhar lista</button>
        </div>
      </div>
    </header>

    <!-- Screen: Lists -->
    <main id="screenLists" class="screen active" aria-label="Listas">
      <div class="lists" id="listsContainer">
        <div class="centered-empty" id="noLists">Nenhuma lista criada. Toque em "Nova Lista" para começar.</div>
      </div>
      <button id="btnNewList" class="new-list-btn" aria-haspopup="dialog"><span class="icon">+</span><span>Nova Lista</span></button>
    </main>

    <!-- Screen: Single List -->
    <section id="screenListDetail" class="screen" aria-label="Detalhes da Lista">
      <div class="list-header">
        <div style="display:flex;align-items:center;gap:8px">
          <div id="currentListName" class="list-name" tabindex="0" role="button" aria-haspopup="dialog">Título</div>
        </div>
      </div>

      <div class="tasks" id="tasksContainer" aria-live="polite"></div>

      <!-- completed group -->
      <div id="completedGroup" style="display:none">
        <div id="completedHeader" class="completed-header" role="button" tabindex="0">
          <span id="chev">▾</span>
          <span>Concluída</span>
          <span class="count" id="completedCount">0</span>
        </div>
        <div id="completedList" class="tasks"></div>
      </div>

      <!-- Floating + (right) -->
      <button id="openComposer" class="fab" aria-label="Adicionar">+</button>
    </section>

    <!-- Screen: Task Detail -->
    <section id="screenTaskDetail" class="screen" aria-label="Tarefa">
      <div class="task-detail">
        <div class="task-detail-row" id="taskDetailRow">
          <button id="taskDetailCheckbox" class="checkbox-round" aria-label="Concluir tarefa"></button>
          <div id="taskDetailText" class="text" contenteditable="true" spellcheck="false" aria-label="Editar tarefa"></div>
        </div>
      </div>
    </section>

    <!-- Modal (Create / Rename) -->
    <div id="modalBackdrop" class="modal-backdrop" role="dialog" aria-modal="true" style="display:none">
      <div class="modal" role="document">
        <h3 id="modalTitle">Nova Lista</h3>
        <div class="modal-body">
          <input id="listNameInput" type="text" placeholder="Nome da lista" aria-label="Nome da lista" />
          <label id="codeToggleContainer" class="code-toggle">
            <input id="listCodeToggle" type="checkbox" />
            <span>Código</span>
          </label>
        </div>
        <div class="actions">
          <button id="modalCancel" class="btn">Cancelar</button>
          <button id="modalPrimary" class="btn primary" disabled>Criar lista</button>
        </div>
      </div>
    </div>

    <!-- Share Code Dialog -->
    <div id="shareBackdrop" class="share-backdrop" role="dialog" aria-modal="true" style="display:none">
      <div class="share-dialog" role="document">
        <h3 class="share-title">Compartilhar Lista</h3>
        <p class="share-instructions">Compartilhe este código com quem você quiser convidar.</p>
        <div class="share-code-row">
          <span id="shareCodeValue" class="share-code" aria-live="polite">ABC 123</span>
          <button id="shareCopyBtn" class="icon-btn copy-btn" type="button" aria-label="Copiar código">
            <svg viewBox="0 0 24 24" aria-hidden="true" focusable="false">
              <path d="M8 8h9a1 1 0 0 1 1 1v9a1 1 0 0 1-1 1H8a1 1 0 0 1-1-1V9a1 1 0 0 1 1-1Zm-2 9V6a1 1 0 0 1 1-1h9" fill="none" stroke="#000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
          </button>
        </div>
        <div id="shareCopyFeedback" class="share-feedback" role="status" aria-live="polite"></div>
        <button id="shareCloseBtn" class="btn share-close" type="button">Fechar</button>
      </div>
    </div>

    <!-- Composer overlay (hidden by default, appears above keyboard, with dim backdrop) -->
    <div id="composerBackdrop" class="composer-backdrop" role="dialog" aria-hidden="true" style="display:none">
      <div class="composer-overlay" role="document">
        <div class="composer-row">
          <button id="composerCheckbox" class="checkbox-round" aria-hidden="true" style="visibility:hidden">○</button>
          <input id="taskInput" placeholder="Adicionar uma tarefa" aria-label="Adicionar uma tarefa" autocomplete="off" />
          <button id="sendTask" class="send-btn" disabled aria-label="Enviar tarefa">↑</button>
        </div>
      </div>
    </div>

  </div>

  
  <script src="script.js?v=1.0.1"></script>
</body>
</html>
